<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>zen-image | Bulk Image Optimizer</title>
  <meta name="description" content="여러 이미지를 한꺼번에 최적화하고 다운로드하세요.">

  <!-- 1. Fonts & CSS -->
  <link rel="stylesheet" href="https://webfontworld.github.io/score/SCoreDream.css">
  <link rel="stylesheet" href="src/styles/main.css">
  <link rel="icon" type="image/png" href="src/assets/app-icon.png">

  <style>
    app-layout:not(:defined) {
      display: none;
    }

    .file-list-item {
      animation: slideUp 0.4s ease-out forwards;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>

  <!-- 2. Tailwind (Local library for stability) -->
  <script src="src/libs/tailwindcss_3.4.5.js"></script>
  <script src="src/config/tailwind.config.js"></script>

  <!-- 3. Libraries -->
  <script src="src/libs/pako.min.js"></script>
  <script src="src/libs/UPNG.js"></script>

  <!-- 4. Components -->
  <script type="module" src="src/components/AppLayout.js"></script>
</head>


<body class="bg-bg text-text-primary antialiased font-sans flex flex-col min-h-screen">
  <app-layout page-title="Bulk Image Optimizer">
    <!-- Main Content -->
    <div class="flex flex-col gap-8">

      <!-- Top: Global Settings & Actions -->
      <div class="card bg-surface/40 backdrop-blur-sm rounded-[24px] p-8 border border-border/50">
        <div class="flex flex-wrap items-end gap-8">
          <!-- Format Settings -->
          <div class="flex-1 min-w-[300px] space-y-4">
            <label class="text-sm font-bold text-text-secondary uppercase tracking-wider">일괄 설정</label>
            <div class="flex items-center gap-6">
              <div class="flex gap-2">
                <button type="button" data-format="auto"
                  class="btn-format active text-xs px-4 py-2 rounded-xl border border-border bg-surface hover:border-accent transition-all font-bold">원본
                  유지</button>
                <button type="button" data-format="image/png"
                  class="btn-format text-xs px-4 py-2 rounded-xl border border-border bg-surface hover:border-accent transition-all font-bold">PNG</button>
                <button type="button" data-format="image/jpeg"
                  class="btn-format text-xs px-4 py-2 rounded-xl border border-border bg-surface hover:border-accent transition-all font-bold">JPG</button>
                <button type="button" data-format="image/webp"
                  class="btn-format text-xs px-4 py-2 rounded-xl border border-border bg-surface hover:border-accent transition-all font-bold">WEBP</button>
              </div>

              <div id="quality-control" class="flex items-center gap-4 flex-1 max-w-[200px]">
                <div class="flex justify-between items-center w-full">
                  <span id="quality-val" class="text-accent font-mono font-bold text-xs">0.9</span>
                  <input type="range" id="input-quality" min="0.1" max="1.0" step="0.05" value="0.9"
                    class="w-32 h-1.5 bg-bg/50 rounded-lg appearance-none cursor-pointer accent-accent ml-3">
                </div>
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="flex gap-3">
            <button id="btn-process-all" class="btn btn-primary !w-auto !px-8" disabled>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
              </svg>
              전체 최적화
            </button>
            <button id="btn-download-all" class="btn btn-secondary !w-auto !px-8" disabled>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              파일 다운로드
            </button>
            <button id="btn-clear"
              class="p-3 rounded-xl border border-border/50 hover:bg-red-500/10 hover:text-red-500 hover:border-red-500/50 transition-all text-text-secondary"
              title="목록 비우기">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Center: Multi Drop Zone -->
      <div
        class="card bg-surface/20 backdrop-blur-sm rounded-[24px] p-12 border-2 border-dashed border-border/50 flex flex-col items-center justify-center cursor-pointer hover:border-accent/50 hover:bg-accent/5 transition-all group relative overflow-hidden h-48"
        id="drop-zone">
        <div id="upload-prompt"
          class="flex flex-col items-center gap-4 transition-all group-hover:scale-[1.02] relative z-10">
          <div
            class="w-12 h-12 bg-surface rounded-2xl flex items-center justify-center text-accent shadow-lg border border-border/50 group-hover:bg-accent group-hover:text-bg transition-all duration-500">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
          </div>
          <div class="text-center">
            <p class="font-bold text-lg text-text-primary">이미지 파일들을 여기에 드래그하거나 클릭하세요</p>
            <p class="text-text-secondary text-sm">여러 파일을 한꺼번에 선택할 수 있습니다.</p>
          </div>
        </div>
        <input type="file" id="file-input" hidden accept="image/*" multiple>
      </div>

      <!-- Bottom: File List Area -->
      <div id="file-list-container" class="space-y-4 mb-12 hidden">
        <h4 class="text-lg font-bold text-text-secondary flex items-center gap-2 px-2">
          처리 대기열 <span id="file-count" class="bg-accent/10 text-accent px-2 py-0.5 rounded text-xs font-mono">0</span>
        </h4>

        <div class="overflow-hidden rounded-2xl border border-border/50 bg-surface/20">
          <table class="w-full text-left text-sm border-collapse">
            <thead>
              <tr
                class="bg-surface/40 text-text-secondary uppercase text-[10px] tracking-widest font-black border-b border-border/50">
                <th class="px-6 py-4">파일명</th>
                <th class="px-6 py-4 text-center">원본 용량</th>
                <th class="px-6 py-4 text-center">결과 용량</th>
                <th class="px-6 py-4 text-center">상태</th>
                <th class="px-6 py-4"></th>
              </tr>
            </thead>
            <tbody id="file-list-body">
              <!-- JS-populated rows -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </app-layout>

  <script type="module" src="src/pages/bulk-optimizer.js"></script>
</body>

</html>